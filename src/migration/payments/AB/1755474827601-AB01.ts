import { MigrationInterface, QueryRunner } from "typeorm";

export class AB01_1755474827601 implements MigrationInterface {
    contractID:number = 601

    public async up(queryRunner: QueryRunner): Promise<void> {
        if(false)
        await queryRunner.query(`UPDATE contract SET "sheduleAmount" = 
            '[
                {"amount": 250000, "months": 3, "startDate": "2023-01-01"},
                {"amount": 275456, "months": 3, "startDate": "2025-04-01"},
                {"amount": 286000, "months": 3, "startDate": "2025-08-01"}

            ]

            '
            WHERE id = ${this.contractID}`)

        await queryRunner.query(`INSERT INTO "payment"
        ("date", "amount", "contractId")
        VALUES

        ('2023-01-05', 25000,$1),
        ('2023-02-14', 25000,$1),
        ('2023-03-20', 25000,$1),
        ('2023-03-20', 25000,$1),
        ('2023-04-14', 47390,$1),
        ('2023-05-05', 47390,$1),
        ('2023-06-14', 47390,$1),
        ('2023-07-14', 47390,$1),
        ('2023-08-05', 47390,$1),
        ('2023-09-14', 47390,$1),
        ('2023-10-14', 37940,$1),
        ('2023-11-14', 37940,$1),
        ('2023-12-14', 26000,$1), ('2023-12-20',25390,$1),

        ('2024-01-05', 47400,$1), ('2024-01-14',16020,$1),
        ('2024-02-14', 35000,$1), ('2024-02-20',12390,$1),('2024-02-05',12900,$1),
        ('2024-03-20',473690,$1),
        ('2024-04-20',142850,$1),
        ('2024-05-26',142854,$1),
        ('2024-06-20',100000,$1), ('2024-06-25',42855,$1),
        ('2024-07-26',142857,$1),
        ('2024-08-20',142857,$1),
        ('2024-09-20',142857,$1),
        ('2024-10-20',142857,$1),
        ('2024-11-20',143000,$1),
        ('2024-12-20',140000,$1),

        ('2025-01-20',142857,$1),
        ('2025-02-25',142857,$1),
        ('2025-03-20',142000,$1),
        ('2025-04-20',149000,$1), ('2025-04-25',197500,$1),
        ('2025-05-14',200000,$1), ('2025-05-20',99050,$1),
        ('2025-06-26',341000,$1),
        ('2025-07-14',300000,$1), ('2025-07-20',31600,$1)

        ;

        `,[this.contractID])

    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`DELETE FROM "payment" WHERE "contractId" = $1 AND "date"< '2025-08-17'`, [this.contractID])
    }

}
