import { MigrationInterface, QueryRunner } from "typeorm";

export class AB02_1755474827602 implements MigrationInterface {
    contractID:number = 602

    public async up(queryRunner: QueryRunner): Promise<void> {
        if(false)
        await queryRunner.query(`UPDATE contract SET "sheduleAmount" = 
            '[
                {"amount": 250000, "months": 3, "startDate": "2023-01-01"},
                {"amount": 275456, "months": 3, "startDate": "2025-04-01"},
                {"amount": 286000, "months": 3, "startDate": "2025-08-01"}

            ]

            '
            WHERE id = ${this.contractID}`)

        await queryRunner.query(`INSERT INTO "payment"
        ("date", "amount", "contractId")
        VALUES

        ('2023-01-11',  22692,$1),
        ('2023-02-18',  22700,$1),
        ('2023-03-11',  42200,$1),
        ('2023-04-18',  42179,$1),('2023-04-25', 13000,$1),
        ('2023-05-25',  42179,$1),
        ('2023-06-11',  48700,$1),
        ('2023-07-11',  42180,$1),
        ('2023-08-18',  18000,$1),
        ('2023-09-01',  55000,$1),('2023-09-18', 11000,$1),
        ('2023-10-18',  42200,$1),
        ('2023-11-11',  42200,$1),
        ('2023-12-11',  42000,$1),

        ('2024-01-11',  42200,$1),('2024-01-18', 12019,$1),
        ('2024-02-18',  50000,$1),('2024-02-25', 54231,$1),
        ('2024-03-18', 104231,$1),
        ('2024-04-18', 104230,$1),
        ('2024-05-18', 104231,$1),
        ('2024-06-25', 150000,$1),
        ('2024-07-11', 150000,$1),
        ('2024-08-11', 150000,$1),('2023-08-25', 30422,$1),
        ('2024-09-18', 150000,$1),
        ('2024-10-18', 100000,$1),
        ('2024-11-01', 230000,$1),
        ('2024-12-18', 190000,$1),

        ('2025-01-25', 100000,$1),
        ('2025-02-01', 120000,$1),('2025-02-18',  210000,$1),('2025-02-25',  38300,$1),
        ('2025-03-18', 200000,$1),
        ('2025-04-18', 240000,$1),
        ('2025-05-18', 200000,$1),
        ('2025-06-01', 220000,$1),('2025-06-01',  160000,$1),
        ('2025-07-01', 271400,$1),
        ('2025-08-01', 250000,$1)


        ;

        `,[this.contractID])

    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`DELETE FROM "payment" WHERE "contractId" = $1  AND "date"< '2025-08-17'`, [this.contractID])
    }

}
